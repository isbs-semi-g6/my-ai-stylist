<!DOCTYPE html>
<html lang="ja">
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.js" integrity="sha512-Xo0Jh8MsOn72LGV8kU5LsclG7SUzJsWGhXbWcYs2MAmChkQzwiW/yTQwdJ8w6UA9C6EVG18GHb/TrYpYCjyAQw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.css" integrity="sha512-KXol4x3sVoO+8ZsWPFI/r5KBVB/ssCGB5tsv2nVOKwLg33wTFP3fmnXa47FdSVIshVTgsYk/1734xSk9aFIa4A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>服装履歴 - AI Stylist</title>
    <!-- Semantic UI CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    </head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>服装履歴 - AI Stylist</title>
        <!-- Semantic UI (CDN) -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    </head>
            <div class="content">
        <div class="ui container" style="padding: 2em 0;">
            <h1 class="ui header">
                <i class="history icon"></i>
                <div class="content">
                    服装履歴
                    <div class="sub header">過去のAIスタイリストによる提案一覧</div>
                </div>
            </h1>

            <div class="ui divider"></div>

            <!-- 履歴リスト（動的レンダリング） -->
            <div id="history-list" class="ui relaxed divided items">
                <!-- JavaScriptでここにレンダリングされます -->
            </div>

            <!-- ページネーション（静的サンプル） -->
            <div class="ui center aligned container" style="margin-top: 2em;">
                <div class="ui pagination menu">
                    <a class="item" id="prev-page">
                        <i class="angle left icon"></i>
                    </a>
                    <a class="active item">1</a>
                    <a class="item">2</a>
                    <a class="item">3</a>
                    <a class="item" id="next-page">
                        <i class="angle right icon"></i>
                    </a>
                </div>
            </div>
        </div>

    <script>
        // データ構造: 各 outfit は日付・天気・気温・items の配列を持つ。
        // items の各要素には、Itemtype(種類)、color、material、shape、name、season、genre を含む。
        // 初期は空の配列。APIやデータベースから動的に読み込む想定。
        const outfits = [];            // レンダリング関数
            function renderOutfits(list) {
                const container = document.getElementById('history-list');
                container.innerHTML = '';

                list.forEach(outfit => {
                    const item = document.createElement('div');
                    item.className = 'item';

                    // 画像
                    const imgWrap = document.createElement('div');
                    imgWrap.className = 'image';
                    const img = document.createElement('img');
                    img.src = outfit.image || 'https://via.placeholder.com/200x200';
                    img.alt = 'コーディネート画像';
                    imgWrap.appendChild(img);
                    item.appendChild(imgWrap);

                    // コンテンツ
                    const content = document.createElement('div');
                    content.className = 'content';

                    const header = document.createElement('div');
                    header.className = 'header';
                    header.textContent = `${formatDateJP(outfit.date)}のコーディネート`;
                    content.appendChild(header);

                    const meta = document.createElement('div');
                    meta.className = 'meta';
                    meta.innerHTML = `<span>気温: ${outfit.temp}</span> <span style="margin-left:1em;">天気: ${outfit.weather}</span>`;
                    content.appendChild(meta);

                    const desc = document.createElement('div');
                    desc.className = 'description';
                    desc.innerHTML = `<p>${summarizeItems(outfit.items)}</p>`;

                    // 服の詳細セクション
                    const detailSegment = document.createElement('div');
                    detailSegment.className = 'ui segment';
                    detailSegment.innerHTML = '<h4 class="ui dividing header">服</h4>';

                    const listWrap = document.createElement('div');
                    listWrap.className = 'ui relaxed divided list';

                    outfit.items.forEach(it => {
                        const itItem = document.createElement('div');
                        itItem.className = 'item';

                        const itContent = document.createElement('div');
                        itContent.className = 'content';

                        const itHeader = document.createElement('div');
                        itHeader.className = 'header';
                        itHeader.textContent = `${it.itemtype} — ${it.color}の${it.name}`;
                        itContent.appendChild(itHeader);

                        const itDesc = document.createElement('div');
                        itDesc.className = 'description';
                        itDesc.style.marginTop = '0.5em';

                        const labels = document.createElement('div');
                        labels.className = 'ui tiny labels';

                        labels.innerHTML =
                            `<a class="ui label">種類: ${it.itemtype}</a>` +
                            `<a class="ui label">色: ${it.color}</a>` +
                            `<a class="ui label">材質: ${it.material}</a>` +
                            `<a class="ui label">形: ${it.shape}</a>` +
                            `<a class="ui label">名前: ${it.name}</a>` +
                            `<a class="ui label">季節: ${it.season}</a>` +
                            `<a class="ui label">ジャンル: ${it.genre}</a>`;

                        itDesc.appendChild(labels);
                        itContent.appendChild(itDesc);
                        itItem.appendChild(itContent);
                        listWrap.appendChild(itItem);
                    });

                    detailSegment.appendChild(listWrap);
                    desc.appendChild(detailSegment);

                    content.appendChild(desc);

                    // extra: 全体タグ
                    const extra = document.createElement('div');
                    extra.className = 'extra';
                    // 代表ジャンル・季節を最初のアイテムから採るサンプル実装
                    const repGenre = outfit.items[0] ? outfit.items[0].genre : '';
                    const repSeason = outfit.items[0] ? outfit.items[0].season : '';
                    extra.innerHTML = `<div class="ui label"><i class="tag icon"></i>${repGenre}</div><div class="ui label"><i class="calendar icon"></i>${repSeason}</div>`;
                    content.appendChild(extra);

                    item.appendChild(content);
                    container.appendChild(item);
                });
            }

            function summarizeItems(items) {
                return items.map(i => `${i.color}の${i.name}`).join('、');
            }

            function formatDateJP(dateStr) {
                // YYYY-MM-DD -> YYYY年M月D日
                const d = new Date(dateStr);
                if (isNaN(d)) return dateStr;
                return `${d.getFullYear()}年${d.getMonth() + 1}月${d.getDate()}日`;
            }

            // 初期レンダリング
            document.addEventListener('DOMContentLoaded', () => {
                renderOutfits(outfits);
            });
        </script>